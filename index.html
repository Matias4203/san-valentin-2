<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Valentín</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap">
    <script defer src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api"></script>
</head>
<body>

    <div id="errorSection" class="section">
        <h1>Error al cargar la página</h1>
        <p>Lo sentimos, algo salió mal. Redirigiendo en <span id="countdown">10</span> segundos...</p>
    </div>

    <div id="intro" class="section" style="display:none;">
        <h1 id="welcomeMessage">¡Bienvenida a tu página de San Valentín! 💖</h1>
        <button onclick="goToSection('jokesSection')" class="btn">Haz clic para ver algo especial</button>
    </div>

    <div id="jokesSection" class="section" style="display:none;">
        <h1>Bromas</h1>
        <p id="jokeText"></p>
        <button id="anotherJokeBtn" onclick="showRandomJoke()" class="btn">Otra broma</button>
        <button id="nextSectionBtn" onclick="goToSection('section1')" class="btn" style="display:none;">Ya, quiero seguir</button>
    </div>

    <div id="section1" class="section" style="display:none;">
        <h1>¡Feliz San Valentín!</h1>
        <p>¿Quieres ver un mensaje?</p>
        <button id="showMessagesBtn" class="btn">Sí</button>
        <button id="showExtraMessagesBtn" class="btn">No</button>
        <button onclick="goToSection('intro')" class="btn">Regresar</button>
        <div class="hidden-heart" onclick="revealCode('4')">💖</div>
    </div>

    <div id="section2" class="section" style="display:none;">
        <h2>Eres mi persona especial</h2>
        <p>No soy experto en amor, pero tú y yo juntos, eso sí que tiene sentido.</p>
        <div class="hidden-heart" onclick="revealSecretMessage()">💖</div>
        <p id="secretMessage" class="hidden-message">Eres como la brisa que acaricia sin prisa, como la luna que ilumina sin pedir nada a cambio. En un mundo de pasos apresurados, contigo todo se siente en cámara lenta.</p>
        <button onclick="goToSection('section3')" class="btn">Siguiente</button>
        <button onclick="goToSection('section1')" class="btn">Regresar</button>
        <div class="hidden-heart" onclick="revealCode('2')">💖</div>
    </div>

    <div id="section3" class="section" style="display:none;">
        <h2>Un mensaje desde el corazón</h2>
        <p>Espero que todo esto haya sido agradable para ti y que te lo hayas pasado bien.</p>
        <button onclick="showUnlockCode()" class="btn">¿Listo para la sorpresa final?</button>
        <button onclick="goToSection('section2')" class="btn">Regresar</button>
        <div class="hidden-heart" onclick="revealCode('0')">💖</div>
    </div>

    <div id="unlockSection" class="section" style="display:none;">
        <h2>Desbloquear Sorpresa</h2>
        <p>Introduce el código de desbloqueo para continuar:</p>
        <input type="text" id="unlockCodeInput" placeholder="Código de Desbloqueo">
        <button onclick="checkUnlockCode()" class="btn">Desbloquear</button>
        <p id="unlockErrorMessage" style="color:red; display:none;">Código incorrecto. Intenta nuevamente.</p>
        <button onclick="goToSection('section3')" class="btn">Regresar</button>
    </div>

    <div id="finalSurprise" class="section" style="display:none;">
        <h2>Mi confesión más sincera</h2>
        <p>Desde que te conocí, supe que eras alguien especial. Quiero que sepas que eres la persona más importante para mí y que cada momento contigo es un tesoro. Te amo más de lo que las palabras pueden expresar.</p>
        <button onclick="goToSection('thankYou')" class="btn">Finalizar</button>
        <button onclick="goToSection('section3')" class="btn">Regresar</button>
    </div>

    <div id="thankYou" class="section" style="display:none;">
        <p>Gracias por ser increíble. ¡Te deseo un hermoso San Valentín! 💖</p>
        <div class="hidden-heart" onclick="revealSecretMessage()">💖</div>
        <p id="finalSecretMessage" class="hidden-message">Mi amor por ti es infinito y cada día crece más. Eres mi todo. 💘</p>
        <button onclick="goToSection('finalSurprise')" class="btn">Regresar</button>
    </div>

    <div id="arSection" class="section" style="display:none;">
        <h1>Modo de Realidad Aumentada</h1>
        <video id="video" width="720" height="560" autoplay muted></video>
        <canvas id="overlay" width="720" height="560"></canvas>
        <div id="arMessage" class="ar-message"></div>
        <button onclick="goToSection('intro')" class="btn">Regresar</button>
    </div>

    <div class="hearts"></div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <p id="modalMessage">¿Estás segura de que no quieres ver el mensaje?</p>
            <button id="modalYesBtn" class="btn">Sí</button>
            <button id="modalNoBtn" class="btn">No</button>
            <p id="errorMessage" style="display:none; color:red;"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
